<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Services and Products - ManageYourServices</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="styles/services-products.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <h2>Serviapp</h2>
            </div>
            <div class="menu">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="ourteam.html">Our Team</a></li>
                    <li><a href="services-products.html" class="active">Services</a></li>
                </ul>
            </div>
        </nav>
    </header>
    
    <main>
        <section class="hero services-hero">
            <h1>Services and Products</h1>
            <p class="subtitle">Smart solutions for public service management</p>
        </section>

        <div class="services-controls">
            <div class="search-container">
                <input type="text" id="service-search" placeholder="Search service...">
                <button id="search-btn" class="btn primary">Search</button>
            </div>
            <div class="category-filter">
                <button class="filter-btn active" data-category="all">All</button>
                <button class="filter-btn" data-category="water">Water</button>
                <button class="filter-btn" data-category="energy">Energy</button>
                <button class="filter-btn" data-category="gas">Gas</button>
            </div>
        </div>

        <section class="services-container">
            <h2>Our Solutions</h2>
            <div class="services-grid" id="services-grid">
                <!-- Services will be dynamically loaded from JavaScript -->
            </div>

            <div class="new-service-form">
                <h3>Add New Service</h3>
                <form id="add-service-form">
                    <div class="form-group">
                        <label for="service-name">Service Name:</label>
                        <input type="text" id="service-name" required>
                    </div>
                    <div class="form-group">
                        <label for="service-description">Description:</label>
                        <textarea id="service-description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="service-category">Category:</label>
                        <select id="service-category">
                            <option value="water">Water</option>
                            <option value="energy">Energy</option>
                            <option value="gas">Gas</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="service-icon">Icon:</label>
                        <select id="service-icon">
                            <option value="fa-tint">Water Drop</option>
                            <option value="fa-bolt">Lightning</option>
                            <option value="fa-fire">Fire</option>

                        </select>
                    </div>
                    <button type="submit" class="btn primary">Add Service</button>
                </form>
            </div>
        </section>

        <section class="testimonials-section">
            <h2>User Testimonials</h2>
            <p>Discover the experiences of those who have already implemented our solutions</p>
            
            <div id="testimonials-container" class="testimonials-container">
                <!-- Testimonials will be dynamically loaded here -->
            </div>
            
            <div class="testimonials-controls">
                <button id="show-more-btn" class="btn primary">Show More Testimonials</button>
                <button id="add-testimonial-btn" class="btn secondary">Add My Testimonial</button>
            </div>

            <div id="testimonial-form-container" class="testimonial-form-container" style="display: none;">
                <h3>Add Your Testimonial</h3>
                <form id="add-testimonial-form">
                    <div class="form-group">
                        <label for="testimonial-name">Your Name:</label>
                        <input type="text" id="testimonial-name" required>
                    </div>
                    <div class="form-group">
                        <label for="testimonial-comment">Comment:</label>
                        <textarea id="testimonial-comment" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="testimonial-rating">Rating:</label>
                        <div class="rating-selector" id="rating-selector">
                            <i class="far fa-star" data-rating="1"></i>
                            <i class="far fa-star" data-rating="2"></i>
                            <i class="far fa-star" data-rating="3"></i>
                            <i class="far fa-star" data-rating="4"></i>
                            <i class="far fa-star" data-rating="5"></i>
                        </div>
                        <input type="hidden" id="testimonial-rating" value="0">
                    </div>
                    <button type="submit" class="btn primary">Submit Testimonial</button>
                </form>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <i class="fas fa-leaf"></i>
                <h2>Serviapp</h2>
            </div>
            <div class="footer-links">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="ourteam.html">Our Team</a></li>
                    <li><a href="services-products.html">Services</a></li>
                </ul>
            </div>
            <div class="footer-contact">
                <h3>Contact</h3>
                <p><i class="fas fa-envelope"></i> info@services.com</p>
                <p><i class="fas fa-phone"></i> +1 111 1111</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 ManageYourServices - All rights reserved</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Datos de servicios
            const services = [
    {
        name: "EcoAgua",
        description: "Real-time water consumption monitoring system with personalized alerts and recommendations for reducing usage.",
        icon: "fa-tint",
        category: "water"
    },
    {
        name: "EnergíaSmart",
        description: "Smart energy management platform that optimizes electricity consumption in homes and commercial buildings.",
        icon: "fa-bolt",
        category: "energy"
    },
    {
        name: "GasOptimizer",
        description: "Solution focused on reducing gas usage through real-time monitoring, leak detection, and efficiency tips for households.",
        icon: "fa-fire",
        category: "gas"
    }
];

             const testimonials = [
            {
                name: "María González",
                comment: "Thanks to EcoAgua, we reduced our water consumption by 30% in just 3 months. The real-time alerts are very helpful.",
                rating: 5
            },
            {
                name: "Juan Pérez",
                comment: "EnergíaSmart has allowed us to significantly save on our electricity bill. The system is very intuitive and easy to use.",
                rating: 5
            },
            {
                name: "Laura Sánchez",
                comment: "The EcoEduca workshops have transformed how our community manages public services. Highly recommended.",
                rating: 4
            },
            {
                name: "Roberto Díaz",
                comment: "ReciclaYA has made recycling more fun for the whole family. The kids are very motivated by the rewards system.",
                rating: 5
            },
            {
                name: "Patricia Ramos",
                comment: "The technical support from EcoServicios is exceptional. They’re always available to answer any questions.",
                rating: 4
            },
            {
                name: "Daniel Torres",
                comment: "The personalized recommendations from EnergíaSmart are spot-on and easy to implement.",
                rating: 4
            }
        ];


            // Seleccionamos el contenedor de servicios
            const servicesGrid = document.getElementById('services-grid');
            
            // Reemplaza la función displayServices por esta versión:
            function displayServices(servicesList) {
                // Limpiamos el contenedor
                servicesGrid.innerHTML = '';
                
                // Generamos los elementos de servicio uno por uno
                for (let i = 0; i < servicesList.length; i++) {
                    const service = servicesList[i];
                    
                    // Creamos el elemento del servicio
                    const serviceElement = document.createElement('div');
                    serviceElement.setAttribute('class', 'service-item');
                    serviceElement.setAttribute('data-category', service.category);
                    serviceElement.setAttribute('id', 'service-' + i);
                    
                    // Crear el icono
                    const iconDiv = document.createElement('div');
                    iconDiv.setAttribute('class', 'service-icon');
                    
                    const iconElement = document.createElement('i');
                    iconElement.setAttribute('class', 'fas ' + service.icon);
                    iconDiv.appendChild(iconElement);
                    
                    // Crear el título
                    const titleElement = document.createElement('h3');
                    titleElement.textContent = service.name;
                    
                    // Crear la descripción
                    const descElement = document.createElement('p');
                    descElement.textContent = service.description;
                    
                    // Crear contenedor de acciones
                    const actionsDiv = document.createElement('div');
                    actionsDiv.setAttribute('class', 'service-actions');
                    
                    // Botón de detalles
                    const detailsBtn = document.createElement('button');
                    detailsBtn.setAttribute('class', 'btn secondary details-btn');
                    detailsBtn.textContent = 'Detalles';
                    
                    // Botón eliminar
                    const removeBtn = document.createElement('button');
                    removeBtn.setAttribute('class', 'btn remove-btn');
                    removeBtn.textContent = 'Eliminar';
                    
                    // Añadir botones al contenedor
                    actionsDiv.appendChild(detailsBtn);
                    actionsDiv.appendChild(removeBtn);
                    
                    // Añadir todos los elementos al servicio
                    serviceElement.appendChild(iconDiv);
                    serviceElement.appendChild(titleElement);
                    serviceElement.appendChild(descElement);
                    serviceElement.appendChild(actionsDiv);
                    
                    // Añadir al grid principal
                    servicesGrid.appendChild(serviceElement);
                    
                    // Añadir evento al botón de detalles
                    detailsBtn.addEventListener('click', function() {
                        alert(service.name + '\n\nCategoría: ' + service.category + '\n\n' + service.description);
                    });
                    
                    // Añadir evento al botón de eliminar
                    removeBtn.addEventListener('click', function() {
                        // Confirmamos antes de eliminar
                        if (confirm('¿Estás seguro de que deseas eliminar el servicio "' + service.name + '"?')) {
                            // Eliminamos el elemento
                            servicesGrid.removeChild(serviceElement);
                            
                            // También lo eliminamos del array de servicios
                            services.splice(i, 1);
                            
                            // Mostramos mensaje de confirmación
                            alert('El servicio "' + service.name + '" ha sido eliminado.');
                        }
                    });
                }
            }
            
            // Mostramos todos los servicios inicialmente
            displayServices(services);
            
            // Funcionamiento de los botones de filtro
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Quitamos la clase active de todos los botones
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Añadimos la clase active al botón actual
                    this.classList.add('active');
                    
                    const selectedCategory = this.getAttribute('data-category');
                    
                    if (selectedCategory === 'todos') {
                        displayServices(services);
                    } else {
                        // Filtramos los servicios
                        const filteredServices = services.filter(service => 
                            service.category === selectedCategory
                        );
                        displayServices(filteredServices);
                    }
                });
            });
            
            // Funcionamiento del buscador
            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('service-search');
            
            searchBtn.addEventListener('click', function() {
                const searchText = searchInput.value.toLowerCase();
                
                if (searchText.trim() === '') {
                    displayServices(services);
                    return;
                }
                
                // Filtramos por texto en nombre o descripción
                const searchResults = services.filter(service => 
                    service.name.toLowerCase().includes(searchText) || 
                    service.description.toLowerCase().includes(searchText)
                );
                
                displayServices(searchResults);
            });
            
            // Función para añadir un nuevo servicio
            const addServiceForm = document.getElementById('add-service-form');
            
            addServiceForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Obtenemos los valores del formulario
                const name = document.getElementById('service-name').value;
                const description = document.getElementById('service-description').value;
                const category = document.getElementById('service-category').value;
                const icon = document.getElementById('service-icon').value;
                
                // Creamos el nuevo servicio
                const newService = {
                    name,
                    description,
                    icon,
                    category
                };
                
                // Añadimos al array de servicios
                services.push(newService);
                
                // Actualizamos la visualización
                displayServices(services);
                
                // Limpiamos el formulario
                addServiceForm.reset();
                
                // Mostramos un mensaje de confirmación
                alert(`El servicio "${name}" ha sido añadido correctamente.`);
            });

            // Funciones para los testimonios
            const testimonialsContainer = document.getElementById('testimonials-container');
            const showMoreBtn = document.getElementById('show-more-btn');
            
            let displayedTestimonials = 0;
            
            function displayTestimonials(start, count) {
                for(let i = start; i < start + count && i < testimonials.length; i++) {
                    const testimonial = testimonials[i];
                    
                    // Crear el elemento de testimonio
                    const testimonialElement = document.createElement('div');
                    testimonialElement.setAttribute('class', 'testimonial-card');
                    testimonialElement.setAttribute('data-id', i);
                    
                    // Crear contenedor del contenido
                    const contentDiv = document.createElement('div');
                    contentDiv.setAttribute('class', 'testimonial-content');
                    
                    // Crear texto del testimonio
                    const textP = document.createElement('p');
                    textP.setAttribute('class', 'testimonial-text');
                    textP.textContent = '"' + testimonial.comment + '"';
                    
                    // Crear calificación con estrellas
                    const ratingDiv = document.createElement('div');
                    ratingDiv.setAttribute('class', 'testimonial-rating');
                    
                    // Añadir estrellas según puntuación
                    for(let s = 0; s < 5; s++) {
                        const star = document.createElement('i');
                        if(s < testimonial.rating) {
                            star.setAttribute('class', 'fas fa-star');
                        } else {
                            star.setAttribute('class', 'far fa-star');
                        }
                        ratingDiv.appendChild(star);
                    }
                    
                    // Crear nombre del testimonio
                    const nameH4 = document.createElement('h4');
                    nameH4.setAttribute('class', 'testimonial-name');
                    nameH4.textContent = testimonial.name;
                    
                    // Crear botón de eliminar
                    const deleteBtn = document.createElement('button');
                    deleteBtn.setAttribute('class', 'delete-testimonial-btn');
                    deleteBtn.setAttribute('title', 'Eliminar testimonio');
                    
                    const trashIcon = document.createElement('i');
                    trashIcon.setAttribute('class', 'fas fa-trash');
                    deleteBtn.appendChild(trashIcon);
                    
                    // Añadir todos los elementos al contenido
                    contentDiv.appendChild(textP);
                    contentDiv.appendChild(ratingDiv);
                    contentDiv.appendChild(nameH4);
                    contentDiv.appendChild(deleteBtn);
                    
                    // Añadir contenido al elemento testimonio
                    testimonialElement.appendChild(contentDiv);
                    
                    // Añadir al contenedor principal
                    testimonialsContainer.appendChild(testimonialElement);
                    
                    // Añadir evento al botón eliminar
                    deleteBtn.addEventListener('click', function() {
                        if (confirm('¿Estás seguro de que deseas eliminar este testimonio?')) {
                            // Obtenemos el ID del testimonio
                            const id = parseInt(testimonialElement.getAttribute('data-id'));
                            
                            // Eliminamos el elemento del DOM
                            testimonialsContainer.removeChild(testimonialElement);
                            
                            // Eliminamos del array
                            testimonials.splice(id, 1);
                            
                            // Actualizamos el contador
                            displayedTestimonials--;
                            
                            // Actualizamos todos los testimonios para mantener los IDs correctos
                            testimonialsContainer.innerHTML = '';
                            displayedTestimonials = 0;
                            displayTestimonials(0, displayedTestimonials + 3);
                        }
                    });
                    
                    displayedTestimonials++;
                }
                
                // Mostrar u ocultar el botón "Mostrar más"
                if(displayedTestimonials >= testimonials.length) {
                    showMoreBtn.style.display = 'none';
                } else {
                    showMoreBtn.style.display = 'inline-block';
                }
            }
            
            // Mostrar los primeros 3 testimonios inicialmente
            displayTestimonials(0, 3);
            
            // Evento para mostrar más testimonios
            showMoreBtn.addEventListener('click', function() {
                displayTestimonials(displayedTestimonials, 3);
            });

            // Manejo del formulario de testimonios
            const addTestimonialBtn = document.getElementById('add-testimonial-btn');
            const testimonialForm = document.getElementById('testimonial-form-container');
            
            addTestimonialBtn.addEventListener('click', function() {
                // Alternamos la visibilidad del formulario
                if (testimonialForm.style.display === 'none' || testimonialForm.style.display === '') {
                    testimonialForm.style.display = 'block';
                    this.textContent = 'Cancelar';
                } else {
                    testimonialForm.style.display = 'none';
                    this.textContent = 'Añadir mi testimonio';
                }
            });

            // Manejo de la selección de estrellas
            const ratingStars = document.querySelectorAll('#rating-selector i');
            const ratingInput = document.getElementById('testimonial-rating');
            
            ratingStars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    
                    // Actualizamos el valor del input oculto
                    ratingInput.value = rating;
                    
                    // Actualizamos la visualización de las estrellas
                    ratingStars.forEach((s, index) => {
                        if (index < rating) {
                            s.className = 'fas fa-star';
                        } else {
                            s.className = 'far fa-star';
                        }
                    });
                });
                
                // Añadimos efecto hover
                star.addEventListener('mouseenter', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    
                    ratingStars.forEach((s, index) => {
                        if (index < rating) {
                            s.style.color = '#f1c40f';
                        }
                    });
                });
                
                star.addEventListener('mouseleave', function() {
                    ratingStars.forEach(s => {
                        s.style.color = '';
                    });
                });
            });
            
            // Manejo del envío del formulario de testimonio
            const addTestimonialForm = document.getElementById('add-testimonial-form');
            
            addTestimonialForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Obtenemos los valores del formulario
                const name = document.getElementById('testimonial-name').value;
                const comment = document.getElementById('testimonial-comment').value;
                const rating = parseInt(document.getElementById('testimonial-rating').value);
                
                // Validaciones básicas
                if (!name || !comment || rating < 1) {
                    alert('Por favor, completa todos los campos y selecciona una calificación.');
                    return;
                }
                
                // Creamos el nuevo testimonio
                const newTestimonial = {
                    name,
                    comment,
                    rating
                };
                
                // Añadimos al array de testimonios
                testimonials.push(newTestimonial);
                
                // Actualizamos la visualización
                testimonialForm.style.display = 'none';
                addTestimonialBtn.textContent = 'Añadir mi testimonio';
                
                // Limpiamos y ocultamos el formulario
                addTestimonialForm.reset();
                ratingStars.forEach(s => {
                    s.className = 'far fa-star';
                });
                
                // Mostramos el nuevo testimonio
                testimonialsContainer.innerHTML = '';
                displayedTestimonials = 0;
                displayTestimonials(0, testimonials.length < 3 ? testimonials.length : 3);
                
                // Mensaje de confirmación
                alert('¡Gracias por compartir tu experiencia! Tu testimonio ha sido añadido.');
            });
        });
    </script>
</body>
</html>